
====== PHP RFC: Power Operator ======
  * Version: 0.1
  * Date: 2013-11-23
  * Author: Tjerk Meesters, datibbaw@php.net
  * Status: Draft
  * First Published at: http://wiki.php.net/rfc/pow-operator

===== Introduction =====

This proposal covers the exponential operator  to complement the [[http://php.net/pow|pow()]] function. A few reasons why this could be useful:

  * It's easier to read and shorter to write.
  * It avoids a function call.
  * It can be found in other languages.

===== Proposal =====

The new operator allows writing exponents like this:

<code php>
echo 2 ** 3; // 8
</code>

It also supports GMP overloading:

<code php>
$base = gmp_init(2);
$exponent = 3;
var_dump($base ** $exponent);

// output
object(GMP)#3 (1) {
  ["num"]=>
  string(1) "8"
}
</code>

**Operator precedence and associativity**

The operator precedence is higher than the bitwise (~) and lower than array dereferencing. The proposed associativity is right. This is illustrated with the following edge cases:

<code php>
echo 2 ** 3 ** 2; // 512
echo -3 ** 2; // -9
echo ~3 ** 2; // -10
</code>
===== Proposed PHP Version(s) =====

Next PHP 5.x

===== Impact to Existing Extensions =====

The opcode ''ZEND_POW <165>'' is added, so extensions such as [[http://pecl.php.net/package/vld|vld]] or [[https://github.com/krakjoe/phpdbg|phpdbg]] would have to be updated.

===== Open Issues =====

None.

===== Future Scope =====

This sections details areas where the feature might be improved in future, but that are not currently proposed in this RFC.

===== Proposed Voting Choices =====

There's currently a debate on whether the operator should be left associative (such as VB) or right associative (Python). If unresolved, the choice may appear in the voting options:

  * Yes, right associative; ''2 <nowiki>**</nowiki> 3 <nowiki>**</nowiki> 2 == 512''
  * Yes, left associative; '' 2 <nowiki>**</nowiki> 3 <nowiki>**</nowiki> 2 == 64''
  * No
===== Patches and Tests =====

https://github.com/datibbaw/php-src/compare/master...pow-operator
===== References =====

Links to external references, discussions or RFCs

===== Rejected Features =====

Keep this updated with features that were discussed on the mail lists.