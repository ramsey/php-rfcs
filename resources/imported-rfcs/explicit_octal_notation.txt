====== PHP RFC: Explicit octal integer literal notation ======
  * Version: 1.0
  * Date: 2020-10-20
  * Author: George Peter Banyard, <girgias@php.net>
  * Status: Under Discussion
  * First Published at: https://wiki.php.net/rfc/explicit_octal_notation

===== Introduction =====

PHP's literal octal notation can lead to some confusing results such as <php>"016" == 016</php> evaluating to false. This is because ''016'' is evaluated as an octal integer and resolves to ''14''.

This convention for octal integers is well established and followed by many programming languages (Java, C, C#, Golang, Haskell, and more). However, Python, JavaScript, and Rust [[https://docs.python.org/3/reference/lexical_analysis.html#integer-literals|[1]]][[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Numbers_and_dates|[2]]][[https://doc.rust-lang.org/rust-by-example/primitives/literals.html|[3]]] only accept or support an explicit octal notation ''0o''.

Surprisingly PHP already has support for this notation when using the <php>octdec()</php> and <php>base_convert()</php> functions.

===== Proposal =====

Add support for the explicit octal notation ''0o''/''0O'' for integer literals analogous to ''0x''/''0X'' and ''0b''/''0B'' for hexadecimal and binary.

<code php>
0o16 === 14; // true
0o123 === 83; // true

0O16 === 14; // true
0O123 === 83; // true

016 === 0o16; // true
016 === 0O16; // true
</code>

===== Behaviour of numeric strings =====

As of PHP 7.0, hexadecimal numbers in strings are not considered numeric [[rfc:remove_hex_support_in_numeric_strings|[4]]], as the behaviour was inconsistent with type casting.  Adding complete support for hex numbers in strings was rejected because adding it for other numeric types would be complex and confusing.  In particular:

<blockquote>supporting octal numbers is not possible, because handling the string '0123' as the number 83 would be highly unexpected for end users of an application.</blockquote>

Therefore, this RFC has no impact on numeric strings.  ''"0o16"'' is still interpreted as a string and only a string.

===== Backward Incompatible Changes =====
None

===== Proposed PHP Version(s) =====
Next PHP 8.x.

===== RFC Impact =====
==== To Existing Extensions ====
Added support to the GMP extension.

Added support to the <php>FILTER_VALIDATE_INT</php> filter when using the <php>FILTER_FLAG_ALLOW_OCTAL</php> flag

==== To Opcache ====
None

===== Unaffected PHP Functionality =====

Implicit octal notation is unaffected.

===== Future Scope =====

  * Deprecate the implicit octal notation.
  * Support hexadecimal, octal, and binary numbers in strings

===== Proposed Voting Choices =====

Per the Voting RFC, there is a single Yes/No vote requiring a 2/3 majority for this proposal to be accepted.

<doodle title="Add support for explicit octal notation" auth="girgias" voteType="single" closed="true">
   * Yes
   * No
</doodle>

===== Patches and Tests =====

GitHub patch: https://github.com/php/php-src/pull/6360

Language specification patch TBD.

===== Implementation =====

After the project is implemented, this section should contain 
  - the version(s) it was merged into
  - a link to the git commit(s)
  - a link to the PHP manual entry for the feature
  - a link to the language specification section (if any)

===== References =====

[[https://docs.python.org/3/reference/lexical_analysis.html#integer-literals|[1]]] Python language reference about integer literals \\
[[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Numbers_and_dates|[2]]] JavaScript language references about numbers \\
[[https://doc.rust-lang.org/rust-by-example/primitives/literals.html|[3]]] Rust language reference about literals \\
[[rfc:remove_hex_support_in_numeric_strings|[4]]] PHP RFC: Remove hex support in numeric strings

