====== Remove reliance on Zend API ======
  * Version: 1.0
  * Date: 2009-03-27
  * Author: Paul Biggar <paul.biggar@gmail.com>
  * Status: Early draft
  * First Published at: http://wiki.php.net/rfc/remove_zend_api


A better way to provide a C API, with particular emphasis on decoupling extensions from the interpreter.

===== Introduction =====

** Naturally, this seems insane. Please bear with me. **


===== What's the problem? =====

The Zend API is a large set of functions, macros and data-structures which are used to interact with the Zend Engine, PHP's interpreter. They typically 

The Zend API serves 3 major purposes, roughly in order of importance:

  * Used to write PHP's standard libraries (and much of PECL)
  * Allows hot (performance-sensitive) code to be rewritten in C for speed
  * Embed-SAPI: allows PHP to be embedded within C/C++ applications


The main problem with it is that it constrains the implementation of the Zend Engine. By requiring backwards compatability with the Zend Engine, we are ensuring that the ZendEngine can only be modified in minor ways, which must be backward compatible (mostly - ABI changes are allowed at certain milestones, like PHP 6). This prevents development of a much better (principally faster) version of the Zend Engine. It is instead held to design decisions made nearly 10 years ago.

The Zend API also makes it difficult to write PHP extensions. Although it is not a terribly difficult API to work with, concepts like copy-on-write, change-on-write sets and separation appear to be tricky concepts for many people. The only documentation is Sarah Golemon's book, and the actual code is not well commented.

?embed SAPI still experimental? (doesnt work on mac I think)

Not compatible with other implementations - problems for Project Zero, Phalanger, Roadsend, phc etc.



===== What's the solution? =====



===== Project Plan =====




==== Links ====



===== Changelog =====


