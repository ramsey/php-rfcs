====== Request for Comments: Adding hash_pbkdf2 Function ======
  * Version: 0.1
  * Date: 2012-06-13
  * Author: Anthony Ferrara <me@ircmaxell.com>
  * Status: Under Discussion
  * First Published at: http://wiki.php.net/rfc/hash_pbkdf2

This RFC proposes adding a hash_pbkdf2 function to the hash package

===== Introduction =====

The purpose of this RFC is to add the PBKDF2 algorithm to the available hashing functions as a C implementation.

==== Why do we need PBKDF2? ====

PBKDF2 is defined in [[http://www.ietf.org/rfc/rfc2898.txt|RFC2898]] as a method for implementing password base cryptographic needs. These needs can include password storage, password derivation into a key (for encryption) or secure signatures.  Additionally, it's [[http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf|NIST Recommended]] for password storage.

Adding a core implementation of the PBKDF2 algorithm will enable PHP projects to utilize a fast implementation of the algorithm, putting them on a more level ground for attackers. Since the C implementation is more efficient, more rounds can be computed for the same computational cost compared to a PHP land implementation.  This enables higher iteration counts to be used, providing more security with less impact to the overall performance of the application.

==== Projects and Software That Currently Use PBKDF2 ====

  * WPA and WPA2 for key derivation from password
  * OpenDocument encryption (OpenOffice.org)
  * WinZip AES encryption
  * 1Password
  * LastPass
  * Apple iOS
  * Blackberry Backup Encryption
  * Django Python Framework

===== Proposal and Patch =====

The proposal is to add a hash_pbkdf2() function to the hash extension in core. The proposed function has a signature:

''string hash_pbkdf2(string algo, string password, string salt, int iterations [, int length = 0, bool raw_output = false])''

The patch is available as a [[https://github.com/php/php-src/pull/105|pull request]] to trunk.

===== More about PBKDF2 =====

  * [[http://www.ietf.org/rfc/rfc2898.txt|RFC2898]]
  * [[http://en.wikipedia.org/wiki/PBKDF2|WikiPedia]]
  * [[http://csrc.nist.gov/publications/nistpubs/800-132/nist-sp800-132.pdf|NIST Recommendation - PDF]]
  * [[https://github.com/ircmaxell/PHP-CryptLib/blob/master/lib/CryptLib/Key/Derivation/PBKDF/PBKDF2.php#L45|A Reference Implementation In PHP]]

===== Changelog =====
  * 0.1 - Initial Version