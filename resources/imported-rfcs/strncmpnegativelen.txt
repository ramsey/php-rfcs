====== RFC: strn(case)cmp supporting negative length ======
  * Version: 1.0
  * Date: 2011-07-28
  * Author: Xinchen Hui <laruence@php.net>
  * Status: Under Discussion
  * First Published at: http://wiki.php.net/rfc/strncmpnegativelen/

===== Introduction =====
strncmp doesn't supporting negative length:

<code php>
<?php
   if (strncmp("prefix_num", "num", -3) === 0) {
        echo "they have same suffix\n";
   }
?> 
</code>

running the above script in PHP 5.3.6 will result:
<code>
warning: Length must be greater than or equal to 0 in /tmp/1.php 
</code>

but we know substr supports a negative length as its parameter:
<code php>
<?php
   echo substr("test", 0, -1);
</code>

===== Proposal =====

I wrote a patch to make strn(case)cmp supporting negative length,

after patched, following script:
<code php>
<?php
   if (strncmp("prefix_num", "num", -3) === 0) {
        echo "they have same suffix\n";
   }
?> 
</code>

will work as expect.

and if the abs of the negative length is greater than any strlen of the first two parameters,  strn(case)cmp will works as similar as the same situation with positive length:

<code php>
<?php
  var_dump(strcmp("prefix_num", "num", -10));
  //outpu: int(7)
?> 
</code>

===== Patchs =====
   * http://www.laruence.com/php-dev/php-5-3-strncmp-supprting-negative-length.diff
===== Tests =====
   * http://www.laruence.com/php-dev/strncmpnegativelen.phpt
===== Changelog =====
  * 2011-07-28 Xinchen Hui: Initial RFC creation