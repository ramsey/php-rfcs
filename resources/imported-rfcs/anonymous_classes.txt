
====== PHP RFC: Anonymous Classes ======
  * Version: 0.1
  * Date: 2013-09-22
  * Author: Joe Watkins, krakjoe@php.net
  * Status: Under Discussion
  * First Published at: http://wiki.php.net/rfc/anonymous_classes

===== Introduction =====

For some time PHP has featured anonymous function support in the shape of Closures; this patch introduces the same kind of functionality for objects of an anonymous class.

===== Backward Incompatible Changes =====

New syntax that will fail to parse in previous versions, so no BC breaks.

===== Proposed PHP Version(s) =====

5.6

===== SAPIs Impacted =====

All

===== Impact to Existing Extensions =====

No impact on existing libraries




===== Open Issues =====

N/A


===== Future Scope =====

This patch opens the door for private classes.

===== Proposed Voting Choices =====

Straight forward, we should have this, we should not have this.

===== Syntax =====

<code php>
<?php
function my_factory_function($key, $value) {
    return new class {
        public function __construct($key, $value) {
            $this->key = $key;
            $this->value = $value;
        }
    } ($key, $value);
    
    /* ... */
}

var_dump (new class{});

function my_special_factory($data) {
    return new class extends MySpecialBase {
        /* ... */
    } ($data);
}

class My {
    public function Test() {
        return new class{};
    }
}

$my = new My();
var_dump($my->Test());
?>
</code>

===== Implementation =====

https://github.com/php/php-src/pull/470

===== Rejected Features =====

N/A